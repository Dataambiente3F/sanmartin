<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>General San Martín</title>
            <link rel="icon" type="image/png" href="images/3Fpag.png">
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/buscador.css">
        <script src="https://cdn.jsdelivr.net/npm/ol@latest/dist/ol.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@latest/dist/ol.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"> 
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" /> <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-control-geocoder/dist/Control.Geocoder.css" /> <script src="https://cdn.jsdelivr.net/npm/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    
    
       <script>
        const protocolo = window.location.protocol;

        const esLocal =
            protocolo === "file:" || // Abrís directo desde archivo
            window.location.hostname === "localhost" || // Usás live-server
            window.location.hostname === "127.0.0.1";    // Otro entorno local

        if (!esLocal && sessionStorage.getItem("authenticated") !== "true") {
            window.location.href = "login.html";
        }
        </script>

    
    </head>

    <body>
        <script>
        console.log("Protocol:", window.location.protocol);
        console.log("Hostname:", window.location.hostname);
        console.log("URL completa:", window.location.href);
        </script>

        <div id="loader">
         <img src="images/loader.png" alt="Cargando...">
        </div>

        <div id="top-title-bar">
        <span>Mapa Urbano de General San Martín</span>
        <img src="images/3F.png" alt="Logo 3F" id="logo-3f">
        </div>
        
        <!-- INICIO MENÚ -->
        <div id="main-container">
            <div id="sidebar">

                <!-- Inicio GENERAL --> 
                <div class="category">
                        <div class="category-header">
                            <div class="category-left">
                                <button id="generalesToggle" class="eye-button">
                                    <i id="generalesToggleIcon" class="bi bi-map-fill"></i>
                                </button>
                                <span class="category-title">GENERALES</span>
                            </div>
                            <i class="bi bi-chevron-compact-down chevron-icon"></i>
                        </div>
                        <div class="category-content">
                            <div class="dropdown plazas-dropdown"> 
                                <button id="togglePartidoBtn" class="layer-toggle-button">
                                    <i id="partidoLayerIcon" class="bi bi-eye-slash"></i>
                                    <span>Límite del Partido</span>
                                </button>
                            </div> 
                            <div class="dropdown plazas-dropdown">
                                <button id="toggleLocalidadesBtn" class="layer-toggle-button">
                                    <i id="localidadesLayerIcon" class="bi bi-eye-slash"></i>
                                    <span>Localidades</span>
                                    <span id="toggleNombresLocalidadesBtn" class="nombres-toggle-text">Ocultar Nombres</span>
                                </button>
                            </div>
                            
                        </div>
                </div> <!-- Fin menu-group Generales -->   

                <!-- Inicio ALTA TRANSITABILIDAD --> 
                <div class="category">


                    <div class="category-header">
                        <div class="category-left">
                            <button id="altatransitabilidadToggle" class="eye-button">
                                <i id="altatransitabilidadToggleIcon" class="bi bi-people-fill"></i>
                            </button>
                            <span class="category-title">ALTA TRANSITABILIDAD</span>
                        </div>
                        <i class="bi bi-chevron-compact-down chevron-icon"></i>
                    </div>


                        <div class="category-content">
                            <div class="dropdown plazas-dropdown"> 
                                <button id="toggleEjesEstructurantesBtn" class="layer-toggle-button">
                                    <i id="ejesEstructurantesIcon" class="bi bi-eye-slash"></i>
                                    <span>Ejes estructurantes</span>
                                </button>
                            </div>
                            <div class="dropdown plazas-dropdown">
                                <button id="toggleEjesSecundariosBtn" class="layer-toggle-button">
                                    <i id="ejesSecundariosIcon" class="bi bi-eye-slash"></i>
                                    <span>Ejes secundarios</span>
                                </button>
                            </div>          
                        </div>
                </div> <!-- Fin menu-group ALTA TRANSITABILIDAD -->   

                <!-- Inicio CENSO --> 
                <div class="category">
                    <div class="category-header">
                        <div class="category-left">
                            <button id="censoToggle" class="eye-button">
                                <i id="censoToggleIcon" class="bi bi-map-fill"></i>
                            </button>
                            <span class="category-title">CENSO 2022</span>
                        </div>
                        <i class="bi bi-chevron-compact-down chevron-icon"></i>
                    </div>

                    <div class="category-content">
                        
                        <div class="dropdown plazas-dropdown">
                                <button id="togglepoblaciontotalBtn" class="layer-toggle-button">
                                    <i id="poblaciontotalIcon" class="bi bi-eye-slash"></i>
                                    <span>Población total</span>
                                </button>
                        </div>

                        <!-- Submenú: Población -->
                        <div class="dropdown plazas-dropdown">
                            <button class="layer-toggle-button">
                                <span>  Edad</span>
                                <i class="bi bi-chevron-compact-down chevron-icon"></i>
                            </button>
                            <div class="plazas-subcategorias">

                                    <button id="toggleedadninoBtn" class="btn-tipologia">
                                        <i id="edadninoIcon" class="bi bi-eye-slash"></i>
                                        <span>Niño / Adolescente (0 a 19 años)</span>
                                    </button>

                                    <button id="toggleedadjovenadultoBtn" class="btn-tipologia">
                                        <i id="edadjovenadultoIcon" class="bi bi-eye-slash"></i>
                                        <span>Joven Adulto (20 a 39 años)</span>
                                    </button>

                                    <button id="toggleedadadultoBtn" class="btn-tipologia">
                                        <i id="edadadultoIcon" class="bi bi-eye-slash"></i>
                                        <span>Adulto (40 a 59 años)</span>
                                    </button>

                                    <button id="toggleedadadultomayorBtn" class="btn-tipologia">
                                        <i id="edadadultomayorIcon" class="bi bi-eye-slash"></i>
                                        <span>Adulto Mayor (60 a 79 años)</span>
                                    </button>

                                    <button id="toggleedadancianoBtn" class="btn-tipologia">
                                        <i id="edadancianoIcon" class="bi bi-eye-slash"></i>
                                        <span>Anciano (80+ años)</span>
                                    </button>

                            </div>
                        </div>

                        <!-- Submenú: Educación -->
                        <div class="dropdown plazas-dropdown">
                            <button class="layer-toggle-button">
                                <span>Educación</span>
                                <i class="bi bi-chevron-compact-down chevron-icon"></i>
                            </button>
                            <div class="plazas-subcategorias">
                                <button id="togglecensoniveleducativoBtn" class="btn-tipologia">
                                    <i id="censoniveleducativoIcon" class="bi bi-eye-slash"></i>
                                    <span>Máximo nivel de instrucción alcanzado</span>
                                </button>

                                <button id="togglecensoniveleducativo2Btn" class="btn-tipologia">
                                    <i id="censoniveleducativo2Icon" class="bi bi-eye-slash"></i>
                                    <span>Estudios superiores (completos/incompletos)</span>
                                </button>
                            </div>
                        </div>
                        <!-- Fin Submenú: Educación -->

                        <!-- Submenú: Tecnología -->
                        <div class="dropdown plazas-dropdown">
                            <button class="layer-toggle-button">
                                <span>Acceso a tecnologías</span>
                                <i class="bi bi-chevron-compact-down chevron-icon"></i>
                            </button>
                            <div class="plazas-subcategorias">
                                <button id="toggleinternetnoBtn" class="btn-tipologia">
                                    <i id="internetnoIcon" class="bi bi-eye-slash"></i>
                                    <span>Hogares sin internet</span>
                                </button>
                            </div>
                        </div>
                        <!-- Fin Submenú: Tecnología -->

                    </div>
                </div>
                <!-- Fin CENSO -->
            

                <!-- Sección ESPACIOS URBANOS -->
                <div class="category">
                    <div class="category-header">
                        <div class="category-left">
                            <button id="plazasToggle" class="eye-button">
                                <i id="plazasToggleIcon" class="bi bi-tree-fill"></i>
                            </button>
                            <span class="category-title">ESPACIOS URBANOS</span>
                        </div>
                        <i class="bi bi-chevron-compact-down chevron-icon"></i>
                    </div>

                    <div class="category-content">

                        <div class="dropdown plazas-dropdown">
                            <button id="togglePlazasBtn" class="layer-toggle-button">
                                <i id="redPlazasIcon" class="bi bi-eye-slash"></i>
                                <span>Espacios Verdes</span>
                            </button>

                            <div class="plazas-subcategorias"> <div class="dropdown plazas-dropdown">

                                <div class="dropdown">

                                    <button class="btn-tipologia">
                                        <i class="bi bi-circle"  id="CircleCestos"></i>
                                        <span class="tipologia-texto">Cestos</span>
                                        <i class="bi bi-chevron-compact-down chevron-icon" id="chevronDesplegables"></i>
                                    </button>
                                </div>
                            </div></div>
                        </div> 
                        
                        <div class="dropdown plazas-dropdown">
                            <button id="toggleCentrosComercialesBtn" class="layer-toggle-button">
                            <i id="redCentrosComercialesIcon" class="bi bi-eye-slash"></i>
                            <span>Centros Comerciales</span>
                            </button>
                        </div>

                    </div>
                </div> <!-- FIN ESPACIOS URBANOS -->

            <!-- Inicio ELECCIONES -->
            <div class="category">
            <div class="category-header">
                <div class="category-left">
                <button id="eleccionesToggles" class="eye-button">
                    <i id="eleccionesToggleIcon" class="bi bi-map-fill"></i>
                </button>
                <span class="category-title">ELECCIONES</span>
                </div>
                <i class="bi bi-chevron-compact-down chevron-icon"></i>
            </div>

            <div class="category-content">

                <!-- Dropdown principal: Resultados 2023 -->
                <div class="dropdown plazas-dropdown">
                <button id="toggleResultados2023Btn" class="layer-toggle-button">
                    <span>Resultados 2023</span>
                    <i class="bi bi-chevron-compact-down chevron-icon"></i>
                </button>

                <!-- Contenido del dropdown principal -->
                <div class="plazas-subcategorias">

                    <!-- Submenú: Por ganador -->
                    <div class="dropdown plazas-dropdown">
                        <button id="togglePorGanadorBtn" class="btn-tipologia">
                            <span class="tipologia-texto">Ganador por circuito</span>
                            <i class="bi bi-chevron-compact-down chevron-icon"></i>
                        </button>

                        <div class="plazas-subcategorias">
                            <button id="togglesegundavueltanacional23Btn" class="bisnieto">
                            <i id="segundavueltanacional23Icon" class="bi bi-eye-slash"></i>
                            <span class="tipologia-texto">Nacional - Segunda Vuelta</span>
                            </button>

                            <button id="toggle2023GeneralesNacionalBtn" class="bisnieto">
                            <i id="generales2023Icon" class="bi bi-eye-slash"></i>
                            <span class="tipologia-texto">Nacional - Generales</span>
                            </button>

                            <button id="toggle2023GeneralProvincialBtn" class="bisnieto">
                            <i id="generalprovincial2023Icon" class="bi bi-eye-slash"></i>
                            <span class="tipologia-texto">Provincial - Generales</span>
                            </button>

                            <button id="toggle2023GeneralMunicipalBtn" class="bisnieto">
                            <i id="generalmunicipal2023Icon" class="bi bi-eye-slash"></i>
                            <span class="tipologia-texto">Municipal - Generales</span>
                            </button>

                        </div>
                    </div>
                    <!-- Fin submenú Por ganador -->

                        
                    <!-- Submenú: Por ganador -->
                    <div class="dropdown plazas-dropdown">
                        <button id="togglePorGanadorBtn" class="btn-tipologia">
                            <span class="tipologia-texto">Agrupación por circuito</span>
                            <i class="bi bi-chevron-compact-down chevron-icon"></i>
                        </button>

                        <div class="plazas-subcategorias">
                            <button id="toggle2023GeneralesNacionalLLABtn" class="bisnieto">
                            <i id="generales2023llaIcon" class="bi bi-eye-slash"></i>
                            <span class="tipologia-texto">LLA - Nacional - Generales</span>
                            </button>

                            <button id="toggle2023GeneralesNacionalJXCBtn" class="bisnieto">
                            <i id="generales2023jxcIcon" class="bi bi-eye-slash"></i>
                            <span class="tipologia-texto">JxC - Nacional - Generales</span>
                            </button>
                        </div>
                    </div>
                    <!-- Fin submenú Por ganador -->

                </div>
                <!-- Fin .plazas-subcategorias -->
                </div>
                <!-- Fin dropdown principal -->

            </div>
            </div>
            <!-- Fin ELECCIONES -->
 
            </div> <!-- FIN MENÚ -->

            <div id="map">

                <!-- LIMPIAR FILTROS -->
                <button id="resetPageBtn" title="Limpiar filtros">
                    <i class="bi bi-arrow-counterclockwise"></i>
                </button>

                <!-- ESTILO DE MAPA -->
                <button id="toggleMapStyleBtn" title="Cambiar estilo de mapa">
                    <i class="bi bi-layers-fill"></i>
                </button>

            </div>
        
            <!-- Capas a agregar -->
            <script src="layers/Plazas_0.js"></script>
            <script src="layers/Localidades_0.js"></script>
            <script src="layers/Limites3F_0.js"></script>
            <script src="layers/Ejesestructurantes_0.js"></script>
            <script src="layers/Ejessecundarios_0.js"></script>
            <script src="layers/CentrosComerciales_0.js"></script>
            <script src="layers/FRACCIONESCENSALES_0.js"></script>
            <script src="layers/CIRCUITOS_0.js"></script>
            <script src="layers/intersecciones.js"></script>
            <script src="layers/callejero_normalizado.js"></script>

            <script src="js/funciones/seleccionExclusiva.js" defer></script>


            <script src="js/datosVotos.js"></script>
            <script src="js/censoNiveleducativo.js"></script>
            <script src="js/censoEdad.js"></script>
            <script src="js/censoInternet.js"></script>


        
            <script src="js/capasEstilos.js" defer></script>
            <script src="js/popups.js" defer></script>
            <script src="js/map.js" defer></script>
            

            <script src="js/unified_search.js" defer></script>
            


            <!-- FIN Capas a agregar -->
            <!------------------------------------- GENERALES ----------------------------------->
            
            <!-- POPUT PLAZAS -->
            <div id="popup" class="ol-popup">
                <a href="#" id="popup-closer">✖</a>
                <div id="popup-content"></div>
            </div> <!-- FIN POPUT PLAZAS -->

            <!-- POPUP CC -->
            <div id="popup-comerciales" class="ol-popup" >
                <a href="#" id="popup-comerciales-closer" >✖</a>
                <div id="popup-comerciales-content"></div>
            </div> <!-- FIN POPUT cc -->
        </div>  
    </body>
    
    <script>
    if (sessionStorage.getItem("authenticated") !== "true") {
        window.location.href = "login.html";
    }
    </script>
</html>