/* ===========================================================
   1. RESET Y FUENTES
   =========================================================== */
@import url('https://fonts.googleapis.com/css2?family=Archivo:ital,wght@0,100..900;1,100..900&family=Julius+Sans+One&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap');

html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  font-family: 'Lato', sans-serif;
  font-size: 12px;
  font-weight: 300;
  color: #6e675e;
  overflow: hidden;
}

body {
  display: flex;
  flex-direction: column;
  height: 100vh;
}

/* ===========================================================
   2. LAYOUT GENERAL
   =========================================================== */
#main-container {
  display: flex;
  flex-grow: 1;
  height: calc(100vh - 60px);
  overflow: hidden;
}

#sidebar {
  width: 350px;
  background: #1d1d1d;
  overflow-y: auto;
  overflow-x: hidden;
  height: 100%;
  position: relative;
}

#sidebar::-webkit-scrollbar { width: 6px; }
#sidebar::-webkit-scrollbar-thumb {
  background-color: rgba(255,255,255,0.2);
  border-radius: 4px;
}
#sidebar::-webkit-scrollbar-track { background: transparent; }

#map {
  flex: 1;
  height: 100%;
  position: relative;
}
#map::before {
  content: "";
  position: absolute;
  left: 0; top: 0;
  width: 20px; height: 100%;
  background: linear-gradient(to right, rgba(0,0,0,0.05), transparent);
  z-index: 5;
  pointer-events: none;
}

/* ===========================================================
   3. BARRA SUPERIOR
   =========================================================== */
#top-title-bar {
  background: #141414;
  color: #fff;
  padding: 10px 20px;
  font-size: 20px;
  font-weight: 400;
  display: flex;
  align-items: center;
  justify-content: space-between;
  letter-spacing: 1px;
}
#logo-3f {
  height: 40px;
  width: auto;
}

/* ===========================================================
   4. CATEGORÍAS
   =========================================================== */
.category {
  border-bottom: 1px solid rgba(110,103,94,0.5);
}
.category-header {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  height: 60px;
  padding: 0;
  color: #e9e9e9;
  font-size: 16px;
  font-weight: 500;
  cursor: pointer;
}
.category.active > .category-header {
  background-color: #3a3a3a;
}
.category-content {
  display: none;
  padding: 0;
  margin: 0;
  width: 100%;
}
.category.active .category-content {
  display: block;
}
.category-left {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 1 1 auto;
  min-width: 0;
  font-size: 16px;
}
.category-title {
  white-space: normal;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Efecto hover para el encabezado de la categoría */
.category:not(.active) > .category-header:hover {
    background-color: #2f2f2f; /* Un gris oscuro sutil para el hover */
}

/* ===========================================================
   5.0 BOTONES DE OJO PADRE
   =========================================================== */
.eye-button {
  background: none;
  border: none;
  width: 30px; height: 30px;
  padding-left: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}
.eye-button i {
  font-size: 18px;
}

/* Permite mover el ícono desde su posición original */
.category-header .eye-button i {
    position: relative; /* Permite mover el ícono desde su posición original */
    top: 2px;
}

/* Color gris para los iconos de categoría no activos */
.category-header .eye-button .bi:not([class*="-fill"]):not(.bi-chevron-compact-down):not(.bi-chevron-compact-up) {
color: #505050 !important; 
}

.category-header .eye-button .bi[class*="-fill"] {
color: #ffffff !important; /* Color blanco brillante para indicar que está activa */
}



/* ===========================================================
   5.1 BOTONES DE OJO / CHEVRON
   =========================================================== */
/*
  Estilo específico para los íconos de chevron
  que están DENTRO de los encabezados de categoría principal.
*/
.category-header .chevron-icon {
    color: #c0c0c0;      /* Color del chevron (un gris claro) */
    font-size: 18px;    /* Tamaño del ícono */
    margin-right: 15px; /* Espacio desde el borde derecho */
    position: relative;
    top: 2px;           /* Ajuste vertical (2px hacia abajo) */
    transition: transform 0.2s ease-in-out;
}

/* ===========================================================
   7. DROPDOWNS
   =========================================================== */
.dropdown {
  width: 100%;
  border-top: 1px solid rgba(82,82,82); /* LINEAS DE BORDE*/
}
.dropdown .chevron-icon {
  margin-left: auto;
}
.dropdown-content {
  display: none;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.15s ease-out;
}
.dropdown.active .dropdown-content {
  display: block;
  max-height: 1000px;
}
.plazas-subcategorias {
  display: none;
}
.dropdown.active > .plazas-subcategorias {
  display: block;
  max-height: 1000px;
}



/* ===========================================================
   8. FILTROS
   =========================================================== */
.filter-item {
  display: flex;
  align-items: center;
  padding: 5px 12px;
  font-size: 14px;
  cursor: pointer;
}
.filter-item:hover { background-color: #555; }
.filter-text {
  flex: 1;
  font-size: 12px;
  color: rgba(255,255,255,0.8);
}

/* ===========================================================
   9. BOTONES FLOTEANTES
   =========================================================== */
#resetPageBtn,
#toggleFiltersBtn,
#toggleMapStyleBtn {
  position: absolute;
  top: 20px;
  width: 40px; height: 40px;
  background: rgba(29,29,29,0.8);
  color: white;
  border: none;
  border-radius: 50%;
  z-index: 1001;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  transition: background-color 0.2s;
}
#resetPageBtn { right: 70px; }
#toggleMapStyleBtn { right: 20px; }
#resetPageBtn:hover,
#toggleMapStyleBtn:hover,
#toggleFiltersBtn:hover {
  background-color: rgba(50,50,50,0.95);
}


/* ===========================================================
   10. OPENLAYERS OVERRIDES
   =========================================================== */
.ol-zoom, .ol-rotate { display: none !important; }
.ol-attribution {
  position: absolute !important;
  bottom: 4px !important;
  right: 10px !important;
  background: none !important;
  font-size: 12px;
}
.ol-attribution button { display: none !important; }

/* ===========================================================
   11. LOADER
   =========================================================== */
#loader {
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  background: #000;
  z-index: 9999;
  display: flex;
  justify-content: center;
  align-items: center;
}
#loader img {
  width: 40px; height: 40px;
  animation: spin 2s linear infinite;
  opacity: .8;
}
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}






/* ===========================================================
   HIJOS
   =========================================================== */

.layer-toggle-button span {
    color: #ffffff !important;
    font-size: 13px !important;
    font-weight: 350 !important;
    font-family: 'Lato', sans-serif;
    padding-left: 14px;
}
   
.layer-toggle-button,
.btn-tipologia {
    display: flex;
    align-items: center;
    justify-content: flex-start; /* <-- CLAVE: Agrupa el ícono y el texto a la izquierda */
    width: 100%;
    padding: 9px 0px; /* Padding unificado */
    background-color: #424242;
    color: rgba(255, 255, 255, 0.9);
    border: none;
    cursor: pointer;
    font-size: 0.95em;
    margin: 0;
    border-radius: 0;
    transition: background-color 0.2s;
}

.layer-toggle-button .chevron-icon {
    font-size: 13px;
    margin-right: 18px;   /* Espacio a la derecha (ajusta el valor que ya tenía) */
    margin-left: auto;    /* Déjalo en 'auto' para que se mantenga a la derecha */
    display: inline-block;
    transition: transform 0.2s ease-in-out;
}

.layer-toggle-button .chevron-icon.rotated {
  transform: rotate(180deg);
}
/* ===========================================================
   OJO NUEVOS HIJOS
   =========================================================== */

.layer-toggle-button .bi-eye-fill,
.btn-tipologia .bi-eye-fill 
 {color: #ffffff !important; 
  padding-left: 14px;
}

.layer-toggle-button .bi-eye-slash,
.btn-tipologia .bi-eye-slash {
    color: #8a8a8a !important; 
    opacity: 0.6;
    padding-left: 14px;
}

.layer-toggle-button:hover,
.btn-tipologia:hover { background-color: #555; }
.layer-toggle-button i,
.btn-tipologia i {
  font-size: 1.1em;
  margin-right: 0px;
}


/* ===========================================================
   NUEVO NIETO
   =========================================================== */

.btn-tipologia,
.dropdown-content label.filter-item {
    background-color: #5e5e5e !important;
    color: #ffffff !important;
    font-size: 11px !important;
    border: none;
    border-bottom: 1px solid rgb(245, 245, 245, 0.1);
    font-weight: 300;
}

.btn-tipologia:hover,
.dropdown-content label.filter-item:hover {
    background-color: #737373 !important;
}

.btn-tipologia span {
    padding-left: 14px;
}

.btn-tipologia .chevron-icon {
    font-size: 13px;
    margin-right: 18px;   /* Espacio a la derecha (ajusta el valor que ya tenía) */
    margin-left: auto;    /* Déjalo en 'auto' para que se mantenga a la derecha */
    display: inline-block;
    transition: transform 0.2s ease-in-out;
}

.btn-tipologia .chevron-icon.rotated {
  transform: rotate(180deg);
}

/* ===========================================================
   BISNIETO
   =========================================================== */
/* Estilo base para el bisnieto */
.bisnieto {
    /* Copia los estilos del btn-tipologia */
    display: flex;
    align-items: center;
    justify-content: flex-start;
    width: 100%;
    padding: 9px 0px;
    border: none;
    cursor: pointer;
}

/* Efecto hover */
.bisnieto:hover {
    background-color: #555;
}

/* Alinea el ícono y el texto como en el btn-tipologia */
.bisnieto i {
    font-size: 1.1em;
    margin-right: 0px;
}
.bisnieto span {
    padding-left: 14px;
}

.bisnieto,
.dropdown-content label.filter-item {
    background-color: #737373 !important;
    color: #ffffff !important;
    font-size: 11px !important;
    border: none;
    border-bottom: 1px solid rgb(245, 245, 245, 0.1);
    font-weight: 300;
}

.bisnieto:hover,
.dropdown-content label.filter-item:hover {
    background-color: #707070 !important;
}
.bisnieto span {
    padding-left: 14px;
}

.bisnieto .bi-eye-fill,
.btn-tipologia .bi-eye-fill 
 {color: #ffffff !important; 
  padding-left: 14px;
}

.bisnieto .bi-eye-slash {
    color: #8a8a8a !important; 
    opacity: 0.6;
    padding-left: 14px;
}

.bisnieto:hover,
.btn-tipologia:hover { background-color: #555; }
.bisnieto i,
.btn-tipologia i {
  font-size: 1.1em;
  margin-right: 0px;
}



/* ===========================================================
  MOSTRAR NOMBRES
   =========================================================== */

.layer-toggle-button .nombres-toggle-text {
  margin-left: auto;
  color: #b4b4b4 !important;
  font-size: 10px !important;
  cursor: pointer;
  padding-right: 15px !important;
  font-weight: 500;     /* un poco más fuerte */
}


.nombres-toggle-text {
  margin-left: auto;
  color: #ff0000 !important;
  font-size: 9px;
  cursor: pointer;
  padding-right: 8px;
  font-weight: 300; /* normal */
}

.nombres-toggle-text.active {
  font-weight: 700; /* más grueso al estar activo */
}


/* ===========================================================
   otros
   =========================================================== */
.chevron-icon {
  display: inline-block;         /* 👈 Necesario para que pueda rotar */
  transition: transform 0.3s ease;
}

.chevron-icon.rotated {
  transform: rotate(180deg);
}

.chevron-icon{display:inline-block;transition:transform .3s ease;}
.chevron-icon.rotated{transform:rotate(180deg);}

/* =================================================================== */
/* ESTILOS MODERNOS PARA POPUPS                                        */
/* =================================================================== */

.ol-popup {
    background-color: #2c2c2c;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.45);
    padding: 12px 14px;
    border-radius: 12px;
    border: 1px solid #444;
    width: 220px;
    color: #e9e9e9;
    font-family: 'Lato', sans-serif;
    font-size: 14px;
    line-height: 1.5;

    /* Estado oculto inicial */
    opacity: 0;
    transform: scale(0.8) translateY(20px);
    transform-origin: bottom center;
    pointer-events: none;

    /* Animación suave en cambios */
    transition: opacity 0.25s ease, transform 0.3s cubic-bezier(.25, .8, .25, 1);
}

/* Estado visible con animación */
.ol-popup.visible {
  opacity: 1;
  transform: scale(1) translateY(0);
  pointer-events: auto;
}

.ol-popup.animate {
  animation: popupBounce 0.35s ease-out;
}

/* Animación con un pequeño "rebote" */
@keyframes popupBounce {
    0%   { transform: scale(0.8) translateY(20px); opacity: 0; }
    60%  { transform: scale(1.05) translateY(-2px); opacity: 1; }
    100% { transform: scale(1) translateY(0); opacity: 1; }
}

/* Flecha debajo del popup */
.ol-popup:after {
    content: "";
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border-width: 10px;
    border-style: solid;
    border-color: #2c2c2c transparent transparent transparent;
}

/* Botón cerrar */
.ol-popup a[id$="-closer"] {
    text-decoration: none;
    position: absolute;
    top: 4px;
    right: 6px;
    color: #bbb;
    font-size: 18px;
    line-height: 1;
    transition: color 0.2s ease, transform 0.2s ease;
}

.ol-popup a[id$="-closer"]:hover {
    color: #fff;
    transform: rotate(90deg);
}